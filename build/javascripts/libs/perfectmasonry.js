!function(t){var o=null,r=null,e=null,i=!0;t.extend(t.Isotope.prototype,{_perfectMasonryReset:function(){var s="horizontal"!=this.options.perfectMasonry.layout,n=1==this.options.perfectMasonry.liquid;i&&(i=!1,o=this,r=t(this.element.context),e=r.parent(),this.options.perfectMasonry.minCols=this.options.perfectMasonry.minCols||1,this.options.perfectMasonry.minRows=this.options.perfectMasonry.minRows||1,this.options.perfectMasonry.maxCols=this.options.perfectMasonry.maxCols||9999,this.options.perfectMasonry.maxRows=this.options.perfectMasonry.maxRows||9999),n&&t._data(window,"events").smartresize&&(t(window).off("smartresize.isotope"),t(window).on("resize.isotope.perfectmasonry",function(){r.hasClass("isotope")&&r.isotope("reLayout")}));var a=this.perfectMasonry={};if(this._getSegments(),this._getSegments(!0),this._perfectMasonryGetSegments(),n){var h=e.width(),c=e.height();this.options.perfectMasonry.columnWidth=this.options.perfectMasonry.columnWidth||a.columnWidth,this.options.perfectMasonry.rowHeight=this.options.perfectMasonry.rowHeight||a.rowHeight,a.cols=this.options.perfectMasonry.cols||Math.floor(h/this.options.perfectMasonry.columnWidth),a.rows=this.options.perfectMasonry.rows||Math.floor(c/this.options.perfectMasonry.rowHeight),a.cols=Math.min(Math.max(a.cols,this.options.perfectMasonry.minCols),this.options.perfectMasonry.maxCols),a.rows=Math.min(Math.max(a.rows,this.options.perfectMasonry.minRows),this.options.perfectMasonry.maxRows);var p=s?a.columnWidth/(h/a.cols):a.rowHeight/(c/a.rows);a.columnWidth=Math.floor(a.columnWidth/p),a.rowHeight=Math.floor(a.rowHeight/p)}a.grid=new Array(this.perfectMasonry.cols),a.containerHeight=0,a.containerWidth=0},_perfectMasonryLayout:function(o){var r=this,e=this.perfectMasonry,i="horizontal"!=r.options.perfectMasonry.layout,s=1==r.options.perfectMasonry.liquid;e.grid=new Array(e[i?"cols":"rows"]),o.each(function(){var o=t(this),n=s?o.data("colSpan"):Math.ceil(o.outerWidth()/(e.columnWidth+1)),a=s?o.data("rowSpan"):Math.ceil(o.outerHeight()/(e.rowHeight+1));n||(n=Math.ceil(o.outerWidth(!0)/(e.columnWidth+1)),a=Math.ceil(o.outerHeight(!0)/(e.rowHeight+1)),o.data("colSpan",n),o.data("rowSpan",a));for(var h=i?n:a,c=i?a:n,p=Math.max((i?e.cols-n:e.rows-a)+1,1),f=-1,l=0,M=0;++f<1e4;){e.grid[f]=e.grid[f]||[];for(var d=0;p>d;d++){var y=e.grid[f][d];if(!y){var g=!0;if(n>1||a>1)for(var w=0;h>w;w++){for(var m=0;c>m;m++)if(e.grid[f+m]=e.grid[f+m]||[],e.grid[f+m][d+w]){g=!1;break}if(!g)break}if(g){for(var w=0;h>w;w++)for(var m=0;c>m;m++)e.grid[f+m][d+w]=!0;var l=f,M=d;if(i)var l=d,M=f;return e.containerWidth=Math.max(e.containerWidth,(l+h)*e.columnWidth),e.containerHeight=Math.max(e.containerHeight,(M+c)*e.rowHeight),1==r.options.perfectMasonry.liquid&&o.css({width:e.columnWidth*n,height:e.rowHeight*a}),r._pushPosition(o,l*e.columnWidth,M*e.rowHeight),void 0}}}}r._pushPosition(o,-9999,-9999)});var n=i?e.grid.length:e.grid[0].length,a=i?e.grid[0].length:e.grid.length;t(this.element.context).attr("data-isotope-rows",n).attr("data-isotope-cols",a)},_perfectMasonryGetContainerSize:function(){return{width:this.perfectMasonry.containerWidth,height:this.perfectMasonry.containerHeight}},_perfectMasonryResizeChanged:function(){var t=this.perfectMasonry,o=t.cols,r=t.rows;return this._perfectMasonryGetSegments(),"horizontal"==this.options.perfectMasonry.layout&&r!==t.rows?!0:o!==t.cols?!0:!1},_perfectMasonryGetSegments:function(){var t=this.perfectMasonry,o=this.options.perfectMasonry.parent||this.element.parent(),r=o.width();t.cols=Math.floor(r/t.columnWidth)||1;var e=o.height();t.rows=Math.floor(e/t.rowHeight)||1}})}(jQuery);